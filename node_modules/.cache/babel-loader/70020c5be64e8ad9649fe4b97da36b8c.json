{"remainingRequest":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\src\\pages\\Operario\\listadoPaquetes.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\src\\pages\\Operario\\listadoPaquetes.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\.babelrc","mtime":1596683947000},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1713478866263},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { BaseTable, LoaderSpinner, NoDataFound } from \"@/components\";\nimport RegisterPackage from \"@/pages/Operario\";\nimport axios from 'axios';\nimport Authentication from '@/store/authentication.js';\nimport NotificationTemplateUpdatePackageSuccess from \"../Notifications/NotificationTemplateUpdatePackageSuccess\";\nimport NotificationTemplateUpdatePackageError from \"../Notifications/NotificationTemplateUpdatePackageError\";\nvar tableColumns = [\"Codigo tracking\", \"Nombre Cliente\", \"Sede Destino\", \"Categoria\", \"Fecha Registro\"]; //const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\n\nexport default {\n  components: {\n    BaseTable: BaseTable,\n    LoaderSpinner: LoaderSpinner,\n    NoDataFound: NoDataFound,\n    RegisterPackage: RegisterPackage\n  },\n  data: function data() {\n    return {\n      operarioTable: {\n        title: \"Admin Table\",\n        columns: [].concat(tableColumns),\n        paquetes: [],\n        //actions: \"Acciones\"\n        estados: []\n      },\n      title: \"\",\n      searchWord: \"\",\n      isLoading: true,\n      showMessage: true,\n      listaBoolean: {\n        detalle: false,\n        eliminar: false,\n        modificar: false\n      },\n      idSede: \"\",\n      tableData: [],\n      actualizados: [],\n      errors: [],\n      paquetes: [],\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n    };\n  },\n  mounted: function mounted() {\n    var vue = this;\n    var idUsuario = Authentication.getProfile().id; //vue.tableData = vue.adminTable.paquetes;\n\n    axios.get(this.$store.state.appUri + '/usuarios/obtenerDatosSede/' + idUsuario).then(function (response) {\n      // console.log(response.data.sede.id);\n      vue.idSede = response.data.sede.id; // console.log(vue.idSede);\n      //vue.idSede = 1;\n\n      axios.get(vue.$store.state.appUri + '/sedes/listarPaquetesEnAlmacen2/' + vue.idSede) //colocar el idSede del Operario\n      .then(function (response) {\n        // console.log(response.data);\n        if (response.data.length != 0) {\n          response.data.forEach(function (element) {\n            vue.operarioTable.paquetes.push({\n              \"codigo tracking\": element.codigoTracking,\n              \"nombre cliente\": element.cliente.nombreRazonSocial,\n              \"sede destino\": element.nombreSede.replace('_', ' '),\n              \"fecha registro\": element.fecha_registro.substring(0, 4) + \"/\" + element.fecha_registro.substring(5, 7) + \"/\" + element.fecha_registro.substring(8, 10),\n              \"categoria\": element.categoria.descripcion,\n              \"idPaquete\": element.id,\n              \"estado\": element.estado.replace('_', ' ') //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\n\n            });\n            vue.paquetes.push({\n              \"id\": element.id,\n              \"oaci_sede_destino\": element.oaci_sede_destino,\n              \"id_categoria\": element.categoria.id,\n              \"descripcion\": element.descripcion,\n              \"fecha registro\": element.fecha_registro,\n              \"estado\": element.estado\n            });\n          });\n          vue.showMessage = false;\n        }\n\n        vue.isLoading = false; // console.log(vue.operarioTable.paquetes);\n      });\n    });\n  },\n  methods: {\n    notifyVue: function notifyVue(verticalAlign, horizontalAlign, color, componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    filterTable: function filterTable(searchWord) {\n      var vue = this;\n      tableData = vue.tableData.filter(function (row) {\n        return JSON.stringify(row).includes(searchWord);\n      });\n      vue.adminTable.data = tableData;\n    },\n    actualizarPaquete: function actualizarPaquete(item, state) {\n      var vue = this; // console.log(state+item.idPaquete);\n\n      vue.paquetes.forEach(function (element) {\n        // console.log(element.estado);\n        // console.log(element.id);\n        if (element.id == item.idPaquete) {\n          element.estado = state; // console.log(element.estado);\n        }\n      });\n    },\n    enviarPaquetes: function enviarPaquetes() {\n      var vue = this; // console.log(vue.paquetes);\n\n      axios.post(vue.$store.state.appUri + '/paquetes/actualizarLista', vue.paquetes).then(function (response) {\n        vue.notifyVue('top', 'center', 2, NotificationTemplateUpdatePackageSuccess);\n        vue.$forceUpdate();\n      }).catch(function (e) {\n        vue.errors.push(e);\n        vue.notifyVue('top', 'center', 4, NotificationTemplateUpdatePackageError);\n      });\n      vue.paquetes = [];\n    },\n    anadirPaquete: function anadirPaquete() {\n      this.$router.push('RegisterPackage');\n    }\n  },\n  props: {\n    id: {\n      type: String,\n      default: function _default() {\n        return \"\";\n      }\n    }\n  }\n};",{"version":3,"sources":["listadoPaquetes.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <card>\n    <h5 slot=\"header\" class=\"title\">{{title}}</h5>\n\n\n    <div class=\"row\">\n        <div class=\"col-md-12 m-l-10 p-t-5\">\n            <base-input placeholder=\"Buscar\" v-model=\"searchWord\">\n            </base-input>\n        </div>\n        <!-- <div class=\"col-md-2\">    \n            <base-button :icon=\"true\" type=\"primary\" fill><i class=\"tim-icons icon-upload\"></i></base-button>\n            <base-button :icon=\"true\" fill><i class=\"tim-icons icon-trash-simple\"></i></base-button>\n        </div> -->\n        <div class=\"col-md-12 text-right mb-3\">\n            <base-button type=\"primary\" style=\"margin-right:10px\" fill @click=\"anadirPaquete()\" >AÃ±adir Nuevo Paquete</base-button>\n            <base-button type=\"primary\" fill @click=\"enviarPaquetes()\">Actualizar Estados</base-button>\n        </div>\n        \n    </div>\n    <div v-if=\"isLoading\"><loader-spinner></loader-spinner></div>\n    <div class=\"row\" v-else>\n        <div class=\"col-md-12\"  v-if=\"!showMessage\">\n            <base-table :data=\"operarioTable.paquetes\"\n                :columns=\"operarioTable.columns\"\n                thead-classes=\"text-primary\"\n                :searchWord=\"searchWord\"\n                :setAcciones=\"listaBoolean\"\n                :combo=\"true\"\n                :actions=\"false\"\n                :select=\"false\"\n                @signalState=\"actualizarPaquete\"\n                >\n            </base-table>\n        </div>\n        <div v-else class=\"col-md-12\"><no-data-found></no-data-found></div>\n\n    </div >\n\n  </card>\n</template>\n\n\n<script>\n  import {BaseTable,LoaderSpinner, NoDataFound} from \"@/components\";\n  import RegisterPackage from \"@/pages/Operario\"\n  import axios from 'axios';\n  import Authentication from '@/store/authentication.js';\n  \n  import NotificationTemplateUpdatePackageSuccess from '../Notifications/NotificationTemplateUpdatePackageSuccess';\n  import NotificationTemplateUpdatePackageError from '../Notifications/NotificationTemplateUpdatePackageError';\n  \n  const tableColumns = [\"Codigo tracking\",\"Nombre Cliente\", \"Sede Destino\",\"Categoria\",\"Fecha Registro\"];\n  //const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\n  export default {\n    components: {\n      BaseTable,\n      LoaderSpinner,\n      NoDataFound,\n      RegisterPackage\n    },\n    data() {\n      return {\n        operarioTable: {\n          title: \"Admin Table\",\n          columns: [...tableColumns],\n          paquetes:[],\n          //actions: \"Acciones\"\n          estados:[]\n        },        \n        title: \"\",\n        searchWord: \"\",\n        isLoading: true,\n        showMessage: true,\n        listaBoolean: {detalle:false,eliminar:false,modificar:false},\n        idSede: \"\",\n        tableData:[], \n        actualizados:[],\n        errors:[],\n        paquetes:[],\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n        notifications: {\n          topCenter: false\n        }\n      };\n    },\n    mounted(){\n      let vue = this;\n      var idUsuario = Authentication.getProfile().id;\n      //vue.tableData = vue.adminTable.paquetes;\n      axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/'+idUsuario)\n      .then(function(response){\n        // console.log(response.data.sede.id);\n        vue.idSede = response.data.sede.id;\n        // console.log(vue.idSede);\n        //vue.idSede = 1;\n        axios.get(vue.$store.state.appUri+'/sedes/listarPaquetesEnAlmacen2/'+vue.idSede)//colocar el idSede del Operario\n        .then(function(response){\n        // console.log(response.data);\n        if(response.data.length != 0){\n            response.data.forEach(element => {\n            vue.operarioTable.paquetes.push({\n            \"codigo tracking\": element.codigoTracking,\n            \"nombre cliente\": element.cliente.nombreRazonSocial,\n            \"sede destino\": element.nombreSede.replace('_',' '),\n            \"fecha registro\": element.fecha_registro.substring(0,4)+\"/\"+element.fecha_registro.substring(5,7)+\"/\"+element.fecha_registro.substring(8,10),\n            \"categoria\": element.categoria.descripcion,\n            \"idPaquete\": element.id,\n            \"estado\": element.estado.replace('_',' ')\n            //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\n          })\n          vue.paquetes.push({\n            \"id\": element.id,\n            \"oaci_sede_destino\": element.oaci_sede_destino,\n            \"id_categoria\": element.categoria.id,\n            \"descripcion\": element.descripcion,\n            \"fecha registro\": element.fecha_registro,\n            \"estado\": element.estado\n          })        \n          });\n          vue.showMessage = false;\n        }\n        vue.isLoading = false;\n        // console.log(vue.operarioTable.paquetes);\n        })\n\n      })\n      \n\n    },\n    methods:{\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\n        //const color = 4;\n        //console.log(color);\n        this.$notify({\n          component: componente,\n          icon: \"tim-icons icon-bell-55\",\n          horizontalAlign: horizontalAlign,\n          verticalAlign: verticalAlign,\n          type: this.type[color],\n          timeout: 0\n        });\n      },\n      filterTable:function(searchWord){\n        let vue = this;\n        tableData = vue.tableData.filter(\n          function(row){\n            return (JSON.stringify(row)).includes(searchWord);\n          }\n        )\n        vue.adminTable.data = tableData;\n      },\n      actualizarPaquete:function(item, state){\n        let vue = this;\n        // console.log(state+item.idPaquete);\n        vue.paquetes.forEach(element => {\n          // console.log(element.estado);\n          // console.log(element.id);\n          if(element.id == item.idPaquete){\n            element.estado= state;\n          // console.log(element.estado);\n          }\n        })\n      },\n      enviarPaquetes(){\n        let vue = this;\n        // console.log(vue.paquetes);\n        axios.post(vue.$store.state.appUri+'/paquetes/actualizarLista', vue.paquetes)\n        .then(response => {\n          vue.notifyVue('top', 'center',2, NotificationTemplateUpdatePackageSuccess);\n          vue.$forceUpdate();\n        })\n        .catch(e => {\n          vue.errors.push(e)\n          vue.notifyVue('top', 'center',4, NotificationTemplateUpdatePackageError); \n        });\n        vue.paquetes = [];\n      },\n      anadirPaquete(){\n        this.$router.push('RegisterPackage');\n      }\n    },\n    props: {\n      id: {\n        type: String,\n        default: () => {\n          return \"\";\n        }\n      }\n\n    }\n  }\n</script>\n<style>\n</style>\n"],"sourceRoot":"src/pages/Operario"}]}