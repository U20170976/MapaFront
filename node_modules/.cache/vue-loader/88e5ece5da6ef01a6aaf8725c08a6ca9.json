{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Profile\\CreateProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Profile\\CreateProfile.vue","mtime":1715192479112},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715192468895},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1715192467870},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715192468895},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1715192477908}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport Authentication from '@/store/authentication.js';\n\nimport NotificationTemplateRegisterUserSuccess from '../Notifications/NotificationTemplateRegisterUserSuccess'; \nimport NotificationTemplateModifiyUserSuccess from '../Notifications/NotificationTemplateModifiyUserSuccess';\nimport NotificationTemplateRegisterUserError from '../Notifications/NotificationTemplateRegisterUserError';\n\nconst TIPO_OPERARIO = 'OPERARIO'; //1\nconst TIPO_NATURAL = 'CLIENTE_NATURAL'; //2\nconst TIPO_JURIDICO = 'CLIENTE_JURIDICO'; //3\nconst TIPO_GERENTE = 'GERENTE'; //6\nconst TIPO_ADMIN = 'ADMIN'; //5\nconst TIPO_SA = 'SUPER_ADMIN'; //4\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      default: () => {\n        return \"\";\n      }\n    }\n  },\n  data() {\n    return{\n      data_usuario:{\n        id: null,\n        numeroDocumento: '',\n        nombreRazonSocial:'',\n        correo:'',\n        direccion:'',\n        fechaNacimiento:'',\n        tipoDocumento:'',\n        telefono:'',\n        username:'',\n        idioma:'',\n        tipoUsuario: 0,\n        dniRepresentante: '',\n        nombreRepresentante: '',\n        dniContacto: '',\n        nombreContacto: '',\n        pais:'',\n        ciudad:'',\n        codigoOaci:'',\n        password:'',\n        confirmar_password:'',\n        idSede: -1\n      },\n      fecha_N: '',\n      tipo_juridico: false,\n      usuarios:[],\n      usuario: {},\n      sedes:[],\n      sede:{},\n      reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n    }\n  },\n  methods:{\n    isEmailValid: function() {\n        let vue = this;\n        return (vue.data_usuario.correo == \" \")? \"\" : (vue.reg.test(vue.data_usuario.correo)) ? 'has-success' : 'has-error';\n    },\n    asignarTipo(usuario){\n      let vue = this;\n      vue.data_usuario.tipoUsuario = usuario.id;\n      if(usuario.id == 3)\n        vue.tipo_juridico = true;\n      else\n        vue.tipo_juridico = false;\n    },\n    obtenerCiudad(sede){\n      let vue = this;\n      vue.data_usuario.pais = sede.pais.nombre;\n      vue.data_usuario.ciudad = sede.pais.ciudad;\n      vue.data_usuario.codigoOaci = sede.codigoOaci;\n      vue.data_usuario.idSede = sede.id;\n    },\n    esCamposCompletos(){\n      let vue = this;\n\n      if(vue.data_usuario.tipoUsuario == 3){\n          if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n            vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n            vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n            vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n            vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n            vue.data_usuario.direccion != '' &&\n            vue.data_usuario.tipoDocumento != '' && vue.data_usuario.dniRepresentante != '' &&\n            vue.data_usuario.nombreRepresentante != '' && vue.data_usuario.dniContacto != '' &&\n            vue.data_usuario.nombreContacto != '')\n          return true;\n          \n      }else{\n          if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n              vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n              vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n              vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n              vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n              vue.data_usuario.direccion != '' && vue.data_usuario.fechaNacimiento != '' &&\n              vue.data_usuario.tipoDocumento != '')\n            return true;\n      }\n      return false;\n    },\n    notifyVue(verticalAlign, horizontalAlign,color,componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    modificarUsuario(){\n      let vue = this;\n\n      if(vue.data_usuario.tipoUsuario != 3){\n        vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                           vue.fecha_N.substring(5,7) + \"-\" +\n                                           vue.fecha_N.substring(8,10);\n      }\n      if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n\n        axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n        .then(response=>{\n          vue.notifyVue('top', 'center',2,NotificationTemplateModifiyUserSuccess);            \n        })\n        .catch(function (error) {\n          vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n          console.log(error);\n        });\n      }else{\n        vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n      }\n    },\n    registrarUsuario(){\n      let vue = this;\n      \n\n      if(vue.data_usuario.tipoUsuario != 3){\n        vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                           vue.fecha_N.substring(5,7) + \"-\" +\n                                           vue.fecha_N.substring(8,10);\n      }\n      \n\n      if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n        \n        \n        axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n        .then(response=>{\n          vue.notifyVue('top', 'center',2,NotificationTemplateRegisterUserSuccess);\n          \n          vue.data_usuario.numeroDocumento='';\n          vue.data_usuario.nombreRazonSocial='';\n          vue.data_usuario.correo='';\n          vue.data_usuario.direccion='';\n          vue.data_usuario.fechaNacimiento='';\n          vue.data_usuario.tipoDocumento='';\n          vue.data_usuario.telefono='';\n          vue.data_usuario.username='';\n          vue.data_usuario.idioma='';\n          vue.data_usuario.tipoUsuario=0;\n          vue.data_usuario.dniRepresentante='';\n          vue.data_usuario.nombreRepresentante='';\n          vue.data_usuario.dniContacto='';\n          vue.data_usuario.nombreContacto='';\n          vue.data_usuario.pais='';\n          vue.data_usuario.ciudad='';\n          vue.data_usuario.codigoOaci='';\n          vue.data_usuario.password='';\n          vue.data_usuario.confirmar_password='';\n          vue.data_usuario.idSede=-1;\n\n          vue.fecha_N = '';\n          \n        })\n        .catch(function (error) {\n          vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n          console.log(error);\n        });\n      }else{\n        vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n      }\n    },\n    regresarAlListar: function(){\n      switch(Authentication.getProfile().tipoUsuario){\n        case TIPO_SA:\n          this.$router.push('/admin/usuarios');\n          break;\n        case TIPO_ADMIN:\n          this.$router.push('/admin/usuarios');\n          break;\n        case TIPO_GERENTE:\n          this.$router.push('/gerente/usuarios');\n          break;\n      }\n    }\n  },\n  mounted(){\n    let vue = this;\n    /*\n    vue.data_usuario.numeroDocumento = Authentication.getProfile().numeroDocumento;\n    axios.get(this.$store.state.appUri+'/usuarios/buscar/' + vue.data_usuario.numeroDocumento)\n    .then(function(response){\n        vue.data_usuario.id = response.data.usuario.id;\n        vue.data_usuario.email = response.data.usuario.correo;\n        vue.data_usuario.usuario = response.data.usuario.username;\n        vue.data_usuario.telefono = response.data.usuario.telefono;\n        vue.data_usuario.direccion = response.data.usuario.direccion;\n        vue.data_usuario.fecha_nacimiento = response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10);\n        //console.log(response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10));\n        vue.data_usuario.tipoUsuario = response.data.usuario.tipoUsuario;\n        vue.data_usuario.nombres = response.data.usuario.nombreRazonSocial;\n        vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n        vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n        vue.data_usuario.idioma = response.data.usuario.idioma;\n    });\n    */\n    if(vue.id == 'modificarUsuario'){\n      axios.get(vue.$store.state.appUri + '/usuarios/buscarPorId/' + vue.$route.params.idUsuario).then(function(response){\n        console.log(response.data);\n        // axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ vue.$route.params.idUsuario)\n        // .then(function(response){\n        //   vue.data_usuario.idSede = response.data.sede.id;\n        //   vue.data_usuario.codigoOaci = response.data.sede.codigoOaci;\n        //   vue.data_usuario.pais = response.data.sede.pais.nombre;\n        //   vue.data_usuario.ciudad = response.data.sede.pais.ciudad;\n        //   vue.sede = response.data.sede;\n        // });\n        \n        switch(response.data.usuario.tipoUsuario){\n          case TIPO_OPERARIO:\n            vue.data_usuario.tipoUsuario = 1;\n            vue.usuario = {id: 1, tipo: TIPO_OPERARIO};\n            break;\n          case TIPO_NATURAL:\n            vue.data_usuario.tipoUsuario = 2;\n            vue.usuario = {id: 2, tipo: TIPO_NATURAL};\n            break;\n          case TIPO_JURIDICO:\n            vue.data_usuario.tipoUsuario = 3;\n            vue.usuario = {id: 3, tipo: TIPO_JURIDICO};\n            vue.tipo_juridico = true;\n            break;\n          case TIPO_SA:\n            vue.data_usuario.tipoUsuario = 4;\n            vue.usuario = {id: 4, tipo: TIPO_SA};\n            break;\n          case TIPO_ADMIN:\n            vue.data_usuario.tipoUsuario = 5;\n            vue.usuario = {id: 5, tipo: TIPO_ADMIN};\n            break;\n          case TIPO_GERENTE:\n            vue.data_usuario.tipoUsuario = 6;\n            vue.usuario = {id: 6, tipo: TIPO_GERENTE};\n            break;\n\n        }\n        vue.data_usuario.id = vue.$route.params.idUsuario;\n        vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n        vue.data_usuario.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\n        vue.data_usuario.correo = response.data.usuario.correo;\n        vue.data_usuario.direccion = response.data.usuario.direccion;\n        if(!vue.tipo_juridico){\n          vue.data_usuario.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4) + \"-\" +\n                                           response.data.usuario.fechaNacimiento.substring(5,7) + \"-\" +\n                                           response.data.usuario.fechaNacimiento.substring(8,10);\n        }\n        vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n        vue.data_usuario.telefono = response.data.usuario.telefono;\n        vue.data_usuario.username = response.data.usuario.username;\n        vue.data_usuario.idioma = response.data.usuario.idioma;\n        vue.data_usuario.dniRepresentante = response.data.usuario.representanteLegalDni;\n        vue.data_usuario.nombreRepresentante = response.data.usuario.representanteLegalNombre;\n        vue.data_usuario.dniContacto = response.data.usuario.dniContacto;\n        vue.data_usuario.nombreContacto = response.data.usuario.nombreContacto;\n        vue.data_usuario.idSede = response.data.idSede;\n        vue.data_usuario.codigoOaci = response.data.codigoOaci;\n        vue.data_usuario.pais = response.data.pais;\n        vue.data_usuario.ciudad = response.data.ciudad;\n\n        vue.fecha_N = vue.data_usuario.fechaNacimiento;\n\n        axios.get(vue.$store.state.appUri+'/sedes/listarSedes')\n        .then(function(response){\n          vue.sedes = response.data;\n          vue.sedes.forEach(element =>{\n            if (element.id == vue.data_usuario.idSede) vue.sede = element;\n          })\n        });\n      })\n    }\n\n    if(vue.id != 'modificarUsuario') {\n      axios.get(this.$store.state.appUri+'/sedes/listarSedes')\n      .then(function(response){\n        vue.sedes = response.data;\n      });\n    }\n\n    switch(Authentication.getProfile().tipoUsuario){\n      case TIPO_OPERARIO:\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_NATURAL :\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_JURIDICO:\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'ruc';\n        break;\n      case TIPO_GERENTE:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        vue.data_usuario.tipoUsuario = 1;\n        vue.usuario = vue.usuarios[0];\n        break;\n      case TIPO_ADMIN:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO },\n            { id: 2, tipo: TIPO_NATURAL },\n            { id: 3, tipo: TIPO_JURIDICO },\n            { id: 6, tipo: TIPO_GERENTE }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_SA:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO },\n            { id: 2, tipo: TIPO_NATURAL },\n            { id: 3, tipo: TIPO_JURIDICO },\n            { id: 4, tipo: TIPO_SA },\n            { id: 6, tipo: TIPO_GERENTE },\n            { id: 5, tipo: TIPO_ADMIN }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n    }        \n  }\n}\n",{"version":3,"sources":["CreateProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateProfile.vue","sourceRoot":"src/pages/Profile","sourcesContent":["<template>\r\n  <card>\r\n    \r\n    <h5 slot=\"header\" class=\"title\" v-if=\"id != 'modificarUsuario'\">Registro de nuevo usuario</h5>\r\n    <h5 slot=\"header\" class=\"title\" v-else>Modificar datos de usuario</h5>\r\n\r\n    \r\n    <div class=\"row\">\r\n\r\n      <div class=\"col-md-3 pr-md-1\">\r\n        <div class=\"form-group\">\r\n          <slot name=\"label\">\r\n            <label class=\"control-label\">\r\n              Tipo Usuario\r\n            </label>\r\n          </slot>\r\n          <select class=\"input-group-prepend form-control\" v-model=\"usuario\" @change=\"asignarTipo(usuario)\">\r\n              <option style=\"color:black\" v-for=\"usuario in usuarios\" :key=\"usuario.id\" :value=\"usuario\">\r\n                {{usuario.tipo.replace('_', ' ')}}\r\n              </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div class=\"col-md-4\">\r\n        <div class=\"col-md-6 pr-md-1 form-group\">\r\n          <slot name=\"label\">\r\n            <label class=\"control-label\">\r\n              País\r\n            </label>\r\n          </slot>\r\n          <select class=\"input-group-prepend form-control\" v-model=\"sede\" @change=\"obtenerCiudad(sede)\">\r\n              <option style=\"color:black\" v-for=\"sede in sedes\" :key=\"sede.id\" :value=\"sede\">\r\n                {{sede.pais.nombre}}\r\n              </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"Nombres y Apellidos\"\r\n                  v-model=\"data_usuario.nombreRazonSocial\"                  \r\n                  placeholder=\"Nombres y apellidos\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">  \r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"DNI o RUC\"\r\n                  v-model=\"data_usuario.numeroDocumento\"\r\n                  placeholder=\"DNI o RUC\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">  \r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"Nombre representante legal\"\r\n                  v-if=\"tipo_juridico\"\r\n                  v-model=\"data_usuario.nombreRepresentante\"\r\n                  placeholder=\"Nombre representante legal\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">  \r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"DNI representante legal\"\r\n                  v-if=\"tipo_juridico\"\r\n                  v-model=\"data_usuario.dniRepresentante\"\r\n                  placeholder=\"DNI representante legal\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">  \r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"Nombre contacto\"\r\n                  v-if=\"tipo_juridico\"\r\n                  v-model=\"data_usuario.nombreContacto\"\r\n                  placeholder=\"Nombre contacto\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">  \r\n      <div class=\"col-md-5 pr-md-1\">\r\n        <base-input label=\"DNI contacto\"\r\n                  v-if=\"tipo_juridico\"\r\n                  v-model=\"data_usuario.dniContacto\"\r\n                  placeholder=\"DNI contacto\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-5 pr-md-1\" v-bind:class=\"[isEmailValid()]\">\r\n        <base-input label=\"Email address\"\r\n                  v-model=\"data_usuario.correo\"\r\n                  type=\"email\"\r\n                  placeholder=\"mike@email.com\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-8\">\r\n        <base-input label=\"Dirección\"\r\n                  v-model=\"data_usuario.direccion\"\r\n                  placeholder=\"Dirección\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4 pr-md-1\">\r\n        <base-input label=\"Teléfono\"\r\n                  v-model=\"data_usuario.telefono\"\r\n                  placeholder=\"Teléfono\">\r\n        </base-input>\r\n      </div>\r\n      <div class=\"col-md-4 pr-md-1\">\r\n        <base-input type=\"date\"\r\n                  v-if=\"!tipo_juridico\"\r\n                  label=\"Fecha de nacimiento\"\r\n                  format= \"yyyy-MM-dd\"\r\n                  v-model=\"fecha_N\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4 pr-md-1\">\r\n        <base-input label=\"Nombre de usuario\"\r\n            v-model=\"data_usuario.username\"\r\n            placeholder=\"Nombre de usuario\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4 pr-md-1\">\r\n        <base-input type=\"password\"\r\n            v-model=\"data_usuario.password\"\r\n            label=\"Contraseña\"\r\n            placeholder=\"Contraseña\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4 pr-md-1\">\r\n        <base-input type=\"password\"\r\n            v-model=\"data_usuario.confirmar_password\"\r\n            label=\"Confirmar contraseña\"\r\n            placeholder=\"Confirmar contraseña\">\r\n        </base-input>\r\n      </div>\r\n    </div>\r\n    <b-button v-b-modal.modal-save slot=\"footer\" type=\"primary\" class=\"btn-primary\" fill v-if=\"id != 'modificarUsuario'\">Crear usuario</b-button>\r\n    <b-button v-b-modal.modal-modify slot=\"footer\" type=\"primary\" class=\"btn-primary\" fill v-else>Modificar usuario</b-button>\r\n    <b-modal id=\"modal-save\" title=\"Agregar Usuario\"\r\n        @ok=\"registrarUsuario\">\r\n        ¿Deseas registrar el usuario?\r\n    </b-modal>\r\n    <b-modal id=\"modal-modify\" title=\"Modificar Usuario\"\r\n        @ok=\"modificarUsuario\">\r\n        ¿Deseas modificar los datos del usuario?\r\n    </b-modal>\r\n    <b-button slot=\"footer\" fill @click=\"regresarAlListar()\">Regresar</b-button>\r\n  </card>\r\n</template>\r\n<script>\r\n  import axios from 'axios';\r\n  import Authentication from '@/store/authentication.js';\r\n\r\n  import NotificationTemplateRegisterUserSuccess from '../Notifications/NotificationTemplateRegisterUserSuccess'; \r\n  import NotificationTemplateModifiyUserSuccess from '../Notifications/NotificationTemplateModifiyUserSuccess';\r\n  import NotificationTemplateRegisterUserError from '../Notifications/NotificationTemplateRegisterUserError';\r\n\r\n  const TIPO_OPERARIO = 'OPERARIO'; //1\r\n  const TIPO_NATURAL = 'CLIENTE_NATURAL'; //2\r\n  const TIPO_JURIDICO = 'CLIENTE_JURIDICO'; //3\r\n  const TIPO_GERENTE = 'GERENTE'; //6\r\n  const TIPO_ADMIN = 'ADMIN'; //5\r\n  const TIPO_SA = 'SUPER_ADMIN'; //4\r\n\r\n  export default {\r\n    props: {\r\n      id: {\r\n        type: String,\r\n        default: () => {\r\n          return \"\";\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return{\r\n        data_usuario:{\r\n          id: null,\r\n          numeroDocumento: '',\r\n          nombreRazonSocial:'',\r\n          correo:'',\r\n          direccion:'',\r\n          fechaNacimiento:'',\r\n          tipoDocumento:'',\r\n          telefono:'',\r\n          username:'',\r\n          idioma:'',\r\n          tipoUsuario: 0,\r\n          dniRepresentante: '',\r\n          nombreRepresentante: '',\r\n          dniContacto: '',\r\n          nombreContacto: '',\r\n          pais:'',\r\n          ciudad:'',\r\n          codigoOaci:'',\r\n          password:'',\r\n          confirmar_password:'',\r\n          idSede: -1\r\n        },\r\n        fecha_N: '',\r\n        tipo_juridico: false,\r\n        usuarios:[],\r\n        usuario: {},\r\n        sedes:[],\r\n        sede:{},\r\n        reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\r\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\r\n        notifications: {\r\n          topCenter: false\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      isEmailValid: function() {\r\n          let vue = this;\r\n          return (vue.data_usuario.correo == \" \")? \"\" : (vue.reg.test(vue.data_usuario.correo)) ? 'has-success' : 'has-error';\r\n      },\r\n      asignarTipo(usuario){\r\n        let vue = this;\r\n        vue.data_usuario.tipoUsuario = usuario.id;\r\n        if(usuario.id == 3)\r\n          vue.tipo_juridico = true;\r\n        else\r\n          vue.tipo_juridico = false;\r\n      },\r\n      obtenerCiudad(sede){\r\n        let vue = this;\r\n        vue.data_usuario.pais = sede.pais.nombre;\r\n        vue.data_usuario.ciudad = sede.pais.ciudad;\r\n        vue.data_usuario.codigoOaci = sede.codigoOaci;\r\n        vue.data_usuario.idSede = sede.id;\r\n      },\r\n      esCamposCompletos(){\r\n        let vue = this;\r\n\r\n        if(vue.data_usuario.tipoUsuario == 3){\r\n            if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\r\n              vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\r\n              vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\r\n              vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\r\n              vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\r\n              vue.data_usuario.direccion != '' &&\r\n              vue.data_usuario.tipoDocumento != '' && vue.data_usuario.dniRepresentante != '' &&\r\n              vue.data_usuario.nombreRepresentante != '' && vue.data_usuario.dniContacto != '' &&\r\n              vue.data_usuario.nombreContacto != '')\r\n            return true;\r\n            \r\n        }else{\r\n            if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\r\n                vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\r\n                vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\r\n                vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\r\n                vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\r\n                vue.data_usuario.direccion != '' && vue.data_usuario.fechaNacimiento != '' &&\r\n                vue.data_usuario.tipoDocumento != '')\r\n              return true;\r\n        }\r\n        return false;\r\n      },\r\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\r\n        //const color = 4;\r\n        //console.log(color);\r\n        this.$notify({\r\n          component: componente,\r\n          icon: \"tim-icons icon-bell-55\",\r\n          horizontalAlign: horizontalAlign,\r\n          verticalAlign: verticalAlign,\r\n          type: this.type[color],\r\n          timeout: 0\r\n        });\r\n      },\r\n      modificarUsuario(){\r\n        let vue = this;\r\n\r\n        if(vue.data_usuario.tipoUsuario != 3){\r\n          vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\r\n                                             vue.fecha_N.substring(5,7) + \"-\" +\r\n                                             vue.fecha_N.substring(8,10);\r\n        }\r\n        if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\r\n\r\n          axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\r\n          .then(response=>{\r\n            vue.notifyVue('top', 'center',2,NotificationTemplateModifiyUserSuccess);            \r\n          })\r\n          .catch(function (error) {\r\n            vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\r\n            console.log(error);\r\n          });\r\n        }else{\r\n          vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\r\n        }\r\n      },\r\n      registrarUsuario(){\r\n        let vue = this;\r\n        \r\n\r\n        if(vue.data_usuario.tipoUsuario != 3){\r\n          vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\r\n                                             vue.fecha_N.substring(5,7) + \"-\" +\r\n                                             vue.fecha_N.substring(8,10);\r\n        }\r\n        \r\n\r\n        if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\r\n          \r\n          \r\n          axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\r\n          .then(response=>{\r\n            vue.notifyVue('top', 'center',2,NotificationTemplateRegisterUserSuccess);\r\n            \r\n            vue.data_usuario.numeroDocumento='';\r\n            vue.data_usuario.nombreRazonSocial='';\r\n            vue.data_usuario.correo='';\r\n            vue.data_usuario.direccion='';\r\n            vue.data_usuario.fechaNacimiento='';\r\n            vue.data_usuario.tipoDocumento='';\r\n            vue.data_usuario.telefono='';\r\n            vue.data_usuario.username='';\r\n            vue.data_usuario.idioma='';\r\n            vue.data_usuario.tipoUsuario=0;\r\n            vue.data_usuario.dniRepresentante='';\r\n            vue.data_usuario.nombreRepresentante='';\r\n            vue.data_usuario.dniContacto='';\r\n            vue.data_usuario.nombreContacto='';\r\n            vue.data_usuario.pais='';\r\n            vue.data_usuario.ciudad='';\r\n            vue.data_usuario.codigoOaci='';\r\n            vue.data_usuario.password='';\r\n            vue.data_usuario.confirmar_password='';\r\n            vue.data_usuario.idSede=-1;\r\n\r\n            vue.fecha_N = '';\r\n            \r\n          })\r\n          .catch(function (error) {\r\n            vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\r\n            console.log(error);\r\n          });\r\n        }else{\r\n          vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\r\n        }\r\n      },\r\n      regresarAlListar: function(){\r\n        switch(Authentication.getProfile().tipoUsuario){\r\n          case TIPO_SA:\r\n            this.$router.push('/admin/usuarios');\r\n            break;\r\n          case TIPO_ADMIN:\r\n            this.$router.push('/admin/usuarios');\r\n            break;\r\n          case TIPO_GERENTE:\r\n            this.$router.push('/gerente/usuarios');\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    mounted(){\r\n      let vue = this;\r\n      /*\r\n      vue.data_usuario.numeroDocumento = Authentication.getProfile().numeroDocumento;\r\n      axios.get(this.$store.state.appUri+'/usuarios/buscar/' + vue.data_usuario.numeroDocumento)\r\n      .then(function(response){\r\n          vue.data_usuario.id = response.data.usuario.id;\r\n          vue.data_usuario.email = response.data.usuario.correo;\r\n          vue.data_usuario.usuario = response.data.usuario.username;\r\n          vue.data_usuario.telefono = response.data.usuario.telefono;\r\n          vue.data_usuario.direccion = response.data.usuario.direccion;\r\n          vue.data_usuario.fecha_nacimiento = response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10);\r\n          //console.log(response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10));\r\n          vue.data_usuario.tipoUsuario = response.data.usuario.tipoUsuario;\r\n          vue.data_usuario.nombres = response.data.usuario.nombreRazonSocial;\r\n          vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\r\n          vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\r\n          vue.data_usuario.idioma = response.data.usuario.idioma;\r\n      });\r\n      */\r\n      if(vue.id == 'modificarUsuario'){\r\n        axios.get(vue.$store.state.appUri + '/usuarios/buscarPorId/' + vue.$route.params.idUsuario).then(function(response){\r\n          console.log(response.data);\r\n          // axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ vue.$route.params.idUsuario)\r\n          // .then(function(response){\r\n          //   vue.data_usuario.idSede = response.data.sede.id;\r\n          //   vue.data_usuario.codigoOaci = response.data.sede.codigoOaci;\r\n          //   vue.data_usuario.pais = response.data.sede.pais.nombre;\r\n          //   vue.data_usuario.ciudad = response.data.sede.pais.ciudad;\r\n          //   vue.sede = response.data.sede;\r\n          // });\r\n          \r\n          switch(response.data.usuario.tipoUsuario){\r\n            case TIPO_OPERARIO:\r\n              vue.data_usuario.tipoUsuario = 1;\r\n              vue.usuario = {id: 1, tipo: TIPO_OPERARIO};\r\n              break;\r\n            case TIPO_NATURAL:\r\n              vue.data_usuario.tipoUsuario = 2;\r\n              vue.usuario = {id: 2, tipo: TIPO_NATURAL};\r\n              break;\r\n            case TIPO_JURIDICO:\r\n              vue.data_usuario.tipoUsuario = 3;\r\n              vue.usuario = {id: 3, tipo: TIPO_JURIDICO};\r\n              vue.tipo_juridico = true;\r\n              break;\r\n            case TIPO_SA:\r\n              vue.data_usuario.tipoUsuario = 4;\r\n              vue.usuario = {id: 4, tipo: TIPO_SA};\r\n              break;\r\n            case TIPO_ADMIN:\r\n              vue.data_usuario.tipoUsuario = 5;\r\n              vue.usuario = {id: 5, tipo: TIPO_ADMIN};\r\n              break;\r\n            case TIPO_GERENTE:\r\n              vue.data_usuario.tipoUsuario = 6;\r\n              vue.usuario = {id: 6, tipo: TIPO_GERENTE};\r\n              break;\r\n\r\n          }\r\n          vue.data_usuario.id = vue.$route.params.idUsuario;\r\n          vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\r\n          vue.data_usuario.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\r\n          vue.data_usuario.correo = response.data.usuario.correo;\r\n          vue.data_usuario.direccion = response.data.usuario.direccion;\r\n          if(!vue.tipo_juridico){\r\n            vue.data_usuario.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4) + \"-\" +\r\n                                             response.data.usuario.fechaNacimiento.substring(5,7) + \"-\" +\r\n                                             response.data.usuario.fechaNacimiento.substring(8,10);\r\n          }\r\n          vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\r\n          vue.data_usuario.telefono = response.data.usuario.telefono;\r\n          vue.data_usuario.username = response.data.usuario.username;\r\n          vue.data_usuario.idioma = response.data.usuario.idioma;\r\n          vue.data_usuario.dniRepresentante = response.data.usuario.representanteLegalDni;\r\n          vue.data_usuario.nombreRepresentante = response.data.usuario.representanteLegalNombre;\r\n          vue.data_usuario.dniContacto = response.data.usuario.dniContacto;\r\n          vue.data_usuario.nombreContacto = response.data.usuario.nombreContacto;\r\n          vue.data_usuario.idSede = response.data.idSede;\r\n          vue.data_usuario.codigoOaci = response.data.codigoOaci;\r\n          vue.data_usuario.pais = response.data.pais;\r\n          vue.data_usuario.ciudad = response.data.ciudad;\r\n\r\n          vue.fecha_N = vue.data_usuario.fechaNacimiento;\r\n\r\n          axios.get(vue.$store.state.appUri+'/sedes/listarSedes')\r\n          .then(function(response){\r\n            vue.sedes = response.data;\r\n            vue.sedes.forEach(element =>{\r\n              if (element.id == vue.data_usuario.idSede) vue.sede = element;\r\n            })\r\n          });\r\n        })\r\n      }\r\n\r\n      if(vue.id != 'modificarUsuario') {\r\n        axios.get(this.$store.state.appUri+'/sedes/listarSedes')\r\n        .then(function(response){\r\n          vue.sedes = response.data;\r\n        });\r\n      }\r\n\r\n      switch(Authentication.getProfile().tipoUsuario){\r\n        case TIPO_OPERARIO:\r\n          vue.usuarios=[];\r\n          vue.data_usuario.tipoDocumento = 'dni';\r\n          break;\r\n        case TIPO_NATURAL :\r\n          vue.usuarios=[];\r\n          vue.data_usuario.tipoDocumento = 'dni';\r\n          break;\r\n        case TIPO_JURIDICO:\r\n          vue.usuarios=[];\r\n          vue.data_usuario.tipoDocumento = 'ruc';\r\n          break;\r\n        case TIPO_GERENTE:\r\n          vue.usuarios=[\r\n              { id: 1, tipo: TIPO_OPERARIO }\r\n          ];\r\n          vue.data_usuario.tipoDocumento = 'dni';\r\n          vue.data_usuario.tipoUsuario = 1;\r\n          vue.usuario = vue.usuarios[0];\r\n          break;\r\n        case TIPO_ADMIN:\r\n          vue.usuarios=[\r\n              { id: 1, tipo: TIPO_OPERARIO },\r\n              { id: 2, tipo: TIPO_NATURAL },\r\n              { id: 3, tipo: TIPO_JURIDICO },\r\n              { id: 6, tipo: TIPO_GERENTE }\r\n          ];\r\n          vue.data_usuario.tipoDocumento = 'dni';\r\n          break;\r\n        case TIPO_SA:\r\n          vue.usuarios=[\r\n              { id: 1, tipo: TIPO_OPERARIO },\r\n              { id: 2, tipo: TIPO_NATURAL },\r\n              { id: 3, tipo: TIPO_JURIDICO },\r\n              { id: 4, tipo: TIPO_SA },\r\n              { id: 6, tipo: TIPO_GERENTE },\r\n              { id: 5, tipo: TIPO_ADMIN }\r\n          ];\r\n          vue.data_usuario.tipoDocumento = 'dni';\r\n          break;\r\n      }        \r\n    }\r\n  }\r\n</script>\r\n<style>\r\n</style>\r\n"]}]}