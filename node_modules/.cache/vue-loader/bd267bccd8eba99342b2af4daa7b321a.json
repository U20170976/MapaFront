{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Administrador\\AdminForm.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Administrador\\AdminForm.vue","mtime":1715192479093},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\css-loader\\index.js","mtime":1715192470608},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1715192477909},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715192468895},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1715192477908}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.drop-active {\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 9999;\r\n  opacity: .6;\r\n  text-align: center;\r\n  background: #000;\r\n}\r\n",{"version":3,"sources":["AdminForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminForm.vue","sourceRoot":"src/pages/Administrador","sourcesContent":["<template>\r\n  <card>   \r\n    <h5 slot=\"header\" class=\"title\">{{title}}</h5>\r\n    <div class=\"row\">\r\n        <div class=\"col-md-10 m-l-10 p-t-5\">\r\n            <base-input placeholder=\"Buscar\" v-model=\"searchWord\">\r\n            </base-input>\r\n        </div>\r\n        <div class=\"col-md-2\">    \r\n            <base-button v-b-modal.modal-upload :icon=\"true\" type=\"primary\" fill><i class=\"tim-icons icon-upload\"></i></base-button>\r\n            <b-modal id=\"modal-upload\" :title=\"titleAgregar\" :hide-footer=\"true\">\r\n              <modal-upload-file :path=\"uploadPath\"></modal-upload-file>\r\n            </b-modal>\r\n            <base-button :icon=\"true\" fill @click=\"removeBatch()\"  v-if=\"id == 'sedes'\"><i class=\"tim-icons icon-trash-simple\"></i></base-button>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-md-12 text-right mb-3\" v-if=\"id == 'usuarios' || id == 'usuarios-gerente'\">\r\n        <base-button type=\"primary\" fill @click=\"anadirUsuario()\">Añadir Nuevo Usuario</base-button>\r\n    </div>\r\n\r\n    <div v-if=\"isLoading\"><loader-spinner></loader-spinner></div>\r\n    <div class=\"row\" v-else>        \r\n        <div class=\"col-md-12\" v-if=\"!showMessage\">\r\n            <base-table :data=\"adminTable.data\"\r\n                :columns=\"adminTable.columns\"\r\n                thead-classes=\"text-primary\"\r\n                :searchWord=\"searchWord\"\r\n                :setAcciones=\"listaBoolean\"\r\n                :actions=\"true\"\r\n                :select=\"true\"\r\n                :combo=\"false\"\r\n                @signalRemove=\"remove\"\r\n                @signalModify=\"modify\">\r\n            </base-table>\r\n        </div>\r\n        <div v-else class=\"col-md-12\"><no-data-found></no-data-found></div>\r\n    </div>\r\n  </card>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {BaseTable, LoaderSpinner, NoDataFound, ModalUploadFile} from \"@/components\";\r\n  import axios from 'axios';\r\n  import ModificarSede from '../Administrador/ModificarSede'\r\n  import Authentication from '@/store/authentication.js';\r\n  import NotificationTemplateEliminateSedeSuccess from '../Notifications/NotificationTemplateEliminateSedeSuccess';\r\n  import NotificationTemplateEliminateSedeError from '../Notifications/NotificationTemplateEliminateSedeError';\r\n  import NotificationTemplateEliminateRutaSuccess from '../Notifications/NotificationTemplateEliminateRutaSuccess';\r\n  import NotificationTemplateEliminateRutaError from '../Notifications/NotificationTemplateEliminateRutaError';\r\n  \r\n\r\n  export default {\r\n    components: {\r\n      BaseTable,\r\n      ModificarSede,\r\n      LoaderSpinner,\r\n      NoDataFound,\r\n      ModalUploadFile\r\n    },\r\n    data() {\r\n      return {\r\n        adminTable: {\r\n          title: \"Admin Table\",\r\n          columns: [],\r\n          data: [],\r\n        },        \r\n        idsede:'',\r\n        title: \"\",\r\n        searchWord: \"\",\r\n        isLoading: true,\r\n        showMessage: true,\r\n        listaBoolean: {detalle:false,eliminar:false,modificar:true},\r\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\r\n        notifications: {\r\n          topCenter: false\r\n        },\r\n        sedes: [],\r\n        titleAgregar: \"\",\r\n        files:[],\r\n        uploadPath: \"\",\r\n      };\r\n    },\r\n    mounted(){\r\n      let vue = this;\r\n      vue.tableData = vue.adminTable.data;\r\n      switch(vue.id){\r\n        case \"rutas\":\r\n          vue.title = \"Gestión de Rutas\";\r\n          vue.titleAgregar = \"Agregar archivo de rutas\";\r\n          vue.adminTable.columns = ['Codigo', 'Origen', 'Destino', 'Capacidad','Estado'];\r\n          vue.uploadPath = vue.$store.state.appUri + \"\";\r\n          axios.get(vue.$store.state.appUri + '/rutas/listarRutasNuevo')\r\n          .then(function(response){\r\n            console.log(response.data);\r\n            if(response.data.length != 0){\r\n              vue.showMessage = false;\r\n              response.data.forEach(element => {\r\n                vue.adminTable.data.push({\r\n                  \"select\": false,\r\n                  \"codigo\": element.id, \r\n                  \"origen\": element.nombreSedeOrigen.replace(\"sede_\", \"\"), \r\n                  \"destino\": element.nombreSedeDestino.replace(\"sede_\", \"\"),\r\n                  \"capacidad\": element.capacidad_contratada,\r\n                  \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\r\n                })\r\n              });\r\n            }\r\n            vue.isLoading = false;\r\n          });\r\n          break;\r\n        case \"usuarios\":\r\n          vue.title = \"Gestión de Usuarios\";\r\n          vue.titleAgregar = \"Agregar archivo de usuarios\";\r\n          vue.adminTable.columns = ['Tipo Documento', 'Documento', 'Nombre/Razon Social', 'Rol'];\r\n          vue.uploadPath = vue.$store.state.appUri + \"\";\r\n          axios.get(this.$store.state.appUri+'/usuarios/listar')\r\n          .then(function(response){\r\n            if(response.data.length != 0){\r\n              vue.showMessage = false;\r\n              response.data.forEach(element => {\r\n                  vue.adminTable.data.push({\r\n                    \"select\": false,\r\n                    \"id\": element.id,\r\n                    \"tipo documento\": element.tipoDocumento, \r\n                    \"documento\": element.numeroDocumento, \r\n                    \"nombre/razon social\": element.nombreRazonSocial,\r\n                    \"rol\": element.tipoUsuario.replace(\"_\", \" \").toLowerCase(),\r\n                    \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\r\n                  });\r\n                });\r\n            }\r\n            vue.isLoading = false;\r\n          });\r\n          break;\r\n        case \"usuarios-gerente\":\r\n          vue.title = \"Gestión de Usuarios\";\r\n          vue.titleAgregar = \"Agregar archivo de usuarios\";\r\n          vue.adminTable.columns = ['Tipo Documento', 'Documento', 'Nombre/Razon Social'];\r\n          vue.uploadPath = vue.$store.state.appUri + \"\";\r\n          var idUsuario = Authentication.getProfile().id;\r\n          axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ idUsuario)\r\n          .then(function(response){\r\n            var idSede = response.data.sede.id;\r\n            axios.get(vue.$store.state.appUri+'/usuarios/listarOperariosDeSede/' + idSede)\r\n            .then(function(response){\r\n              if(response.data.length != 0){\r\n                vue.showMessage = false;\r\n                response.data.forEach(element => {\r\n                    vue.adminTable.data.push({\r\n                      \"select\": false,\r\n                      \"id\": element.id,\r\n                      \"tipo documento\": element.tipoDocumento, \r\n                      \"documento\": element.numeroDocumento, \r\n                      \"nombre/razon social\": element.nombreRazonSocial,\r\n                      \"rol\": element.tipoUsuario.replace(\"_\", \" \").toLowerCase(),\r\n                      \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\r\n                    });\r\n                  });\r\n              }\r\n              vue.isLoading = false;\r\n            });\r\n          });\r\n          \r\n          break;\r\n        case \"sedes\":\r\n          vue.title = \"Gestión de Sedes\";\r\n          vue.titleAgregar = \"Agregar archivo de sedes\";\r\n          vue.adminTable.columns = ['Codigo', 'Nombre', 'OACI', 'Locacion', 'Estado'];\r\n          vue.uploadPath = vue.$store.state.appUri + \"\";\r\n          axios.get(vue.$store.state.appUri + '/sedes/listarSedes')\r\n          .then(function(response){\r\n            if(response.data.length != 0){\r\n              vue.showMessage = false;\r\n              response.data.forEach(element => {\r\n                vue.adminTable.data.push({\r\n                  \"select\": false,\r\n                  \"codigo\": element.id, \r\n                  \"nombre\": element.nombre.replace(\"sede_\", \"Sede de \"),\r\n                  \"oaci\": element.codigoOaci, \r\n                  \"prefijoCiudad\": element.prefijoCiudad,\r\n                  \"capacidad\": element.numero_paquetes,\r\n                  \"capacidad_max\": element.capacidad_max,\r\n                  \"locacion\": element.pais.nombre + \" - \" + element.pais.ciudad,\r\n                  \"estado\": element.activo ? \"Activo\": \"Inactivo\"\r\n                })\r\n              });\r\n            }\r\n            vue.isLoading = false;\r\n          });\r\n          break;\r\n      }\r\n    },\r\n    methods:{\r\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\r\n        this.$notify({\r\n          component: componente,\r\n          icon: \"tim-icons icon-bell-55\",\r\n          horizontalAlign: horizontalAlign,\r\n          verticalAlign: verticalAlign,\r\n          type: this.type[color],\r\n          timeout: 0\r\n        });\r\n      },\r\n      anadirUsuario: function(){\r\n        this.$router.push('/admin/crearUsuario');\r\n      },\r\n      remove: function(item){\r\n        let vue = this;        \r\n        switch(vue.id){\r\n          case \"rutas\":            \r\n            axios.post(this.$store.state.appUri + '/rutas/darDeBaja/' + item.codigo).then(function(confirm){\r\n              vue.notifyVue('top', 'center',2, NotificationTemplateEliminateRutaSuccess);\r\n              vue.$forceUpdate();\r\n            })\r\n            .catch(function(error){\r\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateRutaError);\r\n              console.log(error);\r\n            });\r\n            break;\r\n          case \"sedes\":\r\n            axios.post(this.$store.state.appUri + '/sedes/darDeBaja/' + item.codigo).then(function(confirm){\r\n              vue.notifyVue('top', 'center',2, NotificationTemplateEliminateSedeSuccess);\r\n              vue.$forceUpdate();\r\n            })\r\n            .catch(function(error){\r\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateSedeError);\r\n              console.log(error);\r\n            });\r\n            break;\r\n          case \"usuarios\":\r\n            break;\r\n        } \r\n      },\r\n      removeBatch: function(){\r\n        let vue = this;\r\n        switch(vue.id){\r\n          case \"rutas\":\r\n            break;\r\n          case \"sedes\":\r\n            var codigos = {ids: []};\r\n            vue.adminTable.data.forEach(function(item){\r\n              if(item.select) return codigos.ids.push(item.codigo);\r\n            });\r\n            vue.$bvModal.msgBoxConfirm('Por favor, confirme para continuar.',{\r\n              title: 'Eliminar',\r\n              size: 'sm',\r\n              okTitle: 'Sí',\r\n              cancelTitle: 'No',\r\n              hideHeaderClose: false,\r\n              centered: false\r\n            }).then(confirm => {\r\n              if(confirm){\r\n                axios.post(this.$store.state.appUri + '/sedes/darDeBajaMasivo', codigos).then(function(confirm){                  \r\n                  vue.notifyVue('top', 'center',2, NotificationTemplateEliminateSedeSuccess);\r\n                  vue.$forceUpdate();\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateSedeError);\r\n              console.log(error);\r\n            });\r\n            \r\n            break;\r\n          case \"usuarios\":\r\n            break;\r\n        } \r\n      },\r\n      modify: function(item){\r\n        let vue = this;\r\n        switch(vue.id){\r\n          case \"rutas\":\r\n            var idRuta = item.codigo;\r\n            vue.$router.push({name: \"Modificar ruta\", params: {idRuta: item.codigo}});\r\n            break;\r\n          case \"sedes\":\r\n            console.log('Antes');\r\n            console.log(item);\r\n            var idSede = item.codigo;\r\n            vue.$router.push({name: \"Modificar sede\", params: {idSede: item.codigo}});\r\n            console.log('Despues');\r\n            break;\r\n          case \"usuarios\":\r\n            vue.$router.push('/admin/modificarUsuario/' + item.id); \r\n        \r\n            break;\r\n          case \"usuarios-gerente\":\r\n            vue.$router.push({name: \"Modificación de usuarios\", params: {idUsuario: item.id}});\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    props: {\r\n      id: {\r\n        type: String,\r\n        default: () => {\r\n          return \"\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n.drop-active {\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 9999;\r\n  opacity: .6;\r\n  text-align: center;\r\n  background: #000;\r\n}\r\n</style>\r\n"]}]}