{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\listadoPaquetes.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\listadoPaquetes.vue","mtime":1715192479110},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715192468895},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1715192467870},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715192468895},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1715192477908}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {BaseTable,LoaderSpinner, NoDataFound} from \"@/components\";\nimport RegisterPackage from \"@/pages/Operario\"\nimport axios from 'axios';\nimport Authentication from '@/store/authentication.js';\n\nimport NotificationTemplateUpdatePackageSuccess from '../Notifications/NotificationTemplateUpdatePackageSuccess';\nimport NotificationTemplateUpdatePackageError from '../Notifications/NotificationTemplateUpdatePackageError';\n\nconst tableColumns = [\"Codigo tracking\",\"Nombre Cliente\", \"Sede Destino\",\"Categoria\",\"Fecha Registro\"];\n//const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\nexport default {\n  components: {\n    BaseTable,\n    LoaderSpinner,\n    NoDataFound,\n    RegisterPackage\n  },\n  data() {\n    return {\n      operarioTable: {\n        title: \"Admin Table\",\n        columns: [...tableColumns],\n        paquetes:[],\n        //actions: \"Acciones\"\n        estados:[]\n      },        \n      title: \"\",\n      searchWord: \"\",\n      isLoading: true,\n      showMessage: true,\n      listaBoolean: {detalle:false,eliminar:false,modificar:false},\n      idSede: \"\",\n      tableData:[], \n      actualizados:[],\n      errors:[],\n      paquetes:[],\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n    };\n  },\n  mounted(){\n    let vue = this;\n    var idUsuario = Authentication.getProfile().id;\n    //vue.tableData = vue.adminTable.paquetes;\n    axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/'+idUsuario)\n    .then(function(response){\n      // console.log(response.data.sede.id);\n      vue.idSede = response.data.sede.id;\n      // console.log(vue.idSede);\n      //vue.idSede = 1;\n      axios.get(vue.$store.state.appUri+'/sedes/listarPaquetesEnAlmacen2/'+vue.idSede)//colocar el idSede del Operario\n      .then(function(response){\n      // console.log(response.data);\n      if(response.data.length != 0){\n          response.data.forEach(element => {\n          vue.operarioTable.paquetes.push({\n          \"codigo tracking\": element.codigoTracking,\n          \"nombre cliente\": element.cliente.nombreRazonSocial,\n          \"sede destino\": element.nombreSede.replace('_',' '),\n          \"fecha registro\": element.fecha_registro.substring(0,4)+\"/\"+element.fecha_registro.substring(5,7)+\"/\"+element.fecha_registro.substring(8,10),\n          \"categoria\": element.categoria.descripcion,\n          \"idPaquete\": element.id,\n          \"estado\": element.estado.replace('_',' ')\n          //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\n        })\n        vue.paquetes.push({\n          \"id\": element.id,\n          \"oaci_sede_destino\": element.oaci_sede_destino,\n          \"id_categoria\": element.categoria.id,\n          \"descripcion\": element.descripcion,\n          \"fecha registro\": element.fecha_registro,\n          \"estado\": element.estado\n        })        \n        });\n        vue.showMessage = false;\n      }\n      vue.isLoading = false;\n      // console.log(vue.operarioTable.paquetes);\n      })\n\n    })\n    \n\n  },\n  methods:{\n    notifyVue(verticalAlign, horizontalAlign,color,componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    filterTable:function(searchWord){\n      let vue = this;\n      tableData = vue.tableData.filter(\n        function(row){\n          return (JSON.stringify(row)).includes(searchWord);\n        }\n      )\n      vue.adminTable.data = tableData;\n    },\n    actualizarPaquete:function(item, state){\n      let vue = this;\n      // console.log(state+item.idPaquete);\n      vue.paquetes.forEach(element => {\n        // console.log(element.estado);\n        // console.log(element.id);\n        if(element.id == item.idPaquete){\n          element.estado= state;\n        // console.log(element.estado);\n        }\n      })\n    },\n    enviarPaquetes(){\n      let vue = this;\n      // console.log(vue.paquetes);\n      axios.post(vue.$store.state.appUri+'/paquetes/actualizarLista', vue.paquetes)\n      .then(response => {\n        vue.notifyVue('top', 'center',2, NotificationTemplateUpdatePackageSuccess);\n        vue.$forceUpdate();\n      })\n      .catch(e => {\n        vue.errors.push(e)\n        vue.notifyVue('top', 'center',4, NotificationTemplateUpdatePackageError); \n      });\n      vue.paquetes = [];\n    },\n    anadirPaquete(){\n      this.$router.push('RegisterPackage');\n    }\n  },\n  props: {\n    id: {\n      type: String,\n      default: () => {\n        return \"\";\n      }\n    }\n\n  }\n}\n",{"version":3,"sources":["listadoPaquetes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"listadoPaquetes.vue","sourceRoot":"src/pages/Operario","sourcesContent":["<template>\r\n  <card>\r\n    <h5 slot=\"header\" class=\"title\">{{title}}</h5>\r\n\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12 m-l-10 p-t-5\">\r\n            <base-input placeholder=\"Buscar\" v-model=\"searchWord\">\r\n            </base-input>\r\n        </div>\r\n        <!-- <div class=\"col-md-2\">    \r\n            <base-button :icon=\"true\" type=\"primary\" fill><i class=\"tim-icons icon-upload\"></i></base-button>\r\n            <base-button :icon=\"true\" fill><i class=\"tim-icons icon-trash-simple\"></i></base-button>\r\n        </div> -->\r\n        <div class=\"col-md-12 text-right mb-3\">\r\n            <base-button type=\"primary\" style=\"margin-right:10px\" fill @click=\"anadirPaquete()\" >AÃ±adir Nuevo Paquete</base-button>\r\n            <base-button type=\"primary\" fill @click=\"enviarPaquetes()\">Actualizar Estados</base-button>\r\n        </div>\r\n        \r\n    </div>\r\n    <div v-if=\"isLoading\"><loader-spinner></loader-spinner></div>\r\n    <div class=\"row\" v-else>\r\n        <div class=\"col-md-12\"  v-if=\"!showMessage\">\r\n            <base-table :data=\"operarioTable.paquetes\"\r\n                :columns=\"operarioTable.columns\"\r\n                thead-classes=\"text-primary\"\r\n                :searchWord=\"searchWord\"\r\n                :setAcciones=\"listaBoolean\"\r\n                :combo=\"true\"\r\n                :actions=\"false\"\r\n                :select=\"false\"\r\n                @signalState=\"actualizarPaquete\"\r\n                >\r\n            </base-table>\r\n        </div>\r\n        <div v-else class=\"col-md-12\"><no-data-found></no-data-found></div>\r\n\r\n    </div >\r\n\r\n  </card>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {BaseTable,LoaderSpinner, NoDataFound} from \"@/components\";\r\n  import RegisterPackage from \"@/pages/Operario\"\r\n  import axios from 'axios';\r\n  import Authentication from '@/store/authentication.js';\r\n  \r\n  import NotificationTemplateUpdatePackageSuccess from '../Notifications/NotificationTemplateUpdatePackageSuccess';\r\n  import NotificationTemplateUpdatePackageError from '../Notifications/NotificationTemplateUpdatePackageError';\r\n  \r\n  const tableColumns = [\"Codigo tracking\",\"Nombre Cliente\", \"Sede Destino\",\"Categoria\",\"Fecha Registro\"];\r\n  //const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\r\n  export default {\r\n    components: {\r\n      BaseTable,\r\n      LoaderSpinner,\r\n      NoDataFound,\r\n      RegisterPackage\r\n    },\r\n    data() {\r\n      return {\r\n        operarioTable: {\r\n          title: \"Admin Table\",\r\n          columns: [...tableColumns],\r\n          paquetes:[],\r\n          //actions: \"Acciones\"\r\n          estados:[]\r\n        },        \r\n        title: \"\",\r\n        searchWord: \"\",\r\n        isLoading: true,\r\n        showMessage: true,\r\n        listaBoolean: {detalle:false,eliminar:false,modificar:false},\r\n        idSede: \"\",\r\n        tableData:[], \r\n        actualizados:[],\r\n        errors:[],\r\n        paquetes:[],\r\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\r\n        notifications: {\r\n          topCenter: false\r\n        }\r\n      };\r\n    },\r\n    mounted(){\r\n      let vue = this;\r\n      var idUsuario = Authentication.getProfile().id;\r\n      //vue.tableData = vue.adminTable.paquetes;\r\n      axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/'+idUsuario)\r\n      .then(function(response){\r\n        // console.log(response.data.sede.id);\r\n        vue.idSede = response.data.sede.id;\r\n        // console.log(vue.idSede);\r\n        //vue.idSede = 1;\r\n        axios.get(vue.$store.state.appUri+'/sedes/listarPaquetesEnAlmacen2/'+vue.idSede)//colocar el idSede del Operario\r\n        .then(function(response){\r\n        // console.log(response.data);\r\n        if(response.data.length != 0){\r\n            response.data.forEach(element => {\r\n            vue.operarioTable.paquetes.push({\r\n            \"codigo tracking\": element.codigoTracking,\r\n            \"nombre cliente\": element.cliente.nombreRazonSocial,\r\n            \"sede destino\": element.nombreSede.replace('_',' '),\r\n            \"fecha registro\": element.fecha_registro.substring(0,4)+\"/\"+element.fecha_registro.substring(5,7)+\"/\"+element.fecha_registro.substring(8,10),\r\n            \"categoria\": element.categoria.descripcion,\r\n            \"idPaquete\": element.id,\r\n            \"estado\": element.estado.replace('_',' ')\r\n            //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\r\n          })\r\n          vue.paquetes.push({\r\n            \"id\": element.id,\r\n            \"oaci_sede_destino\": element.oaci_sede_destino,\r\n            \"id_categoria\": element.categoria.id,\r\n            \"descripcion\": element.descripcion,\r\n            \"fecha registro\": element.fecha_registro,\r\n            \"estado\": element.estado\r\n          })        \r\n          });\r\n          vue.showMessage = false;\r\n        }\r\n        vue.isLoading = false;\r\n        // console.log(vue.operarioTable.paquetes);\r\n        })\r\n\r\n      })\r\n      \r\n\r\n    },\r\n    methods:{\r\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\r\n        //const color = 4;\r\n        //console.log(color);\r\n        this.$notify({\r\n          component: componente,\r\n          icon: \"tim-icons icon-bell-55\",\r\n          horizontalAlign: horizontalAlign,\r\n          verticalAlign: verticalAlign,\r\n          type: this.type[color],\r\n          timeout: 0\r\n        });\r\n      },\r\n      filterTable:function(searchWord){\r\n        let vue = this;\r\n        tableData = vue.tableData.filter(\r\n          function(row){\r\n            return (JSON.stringify(row)).includes(searchWord);\r\n          }\r\n        )\r\n        vue.adminTable.data = tableData;\r\n      },\r\n      actualizarPaquete:function(item, state){\r\n        let vue = this;\r\n        // console.log(state+item.idPaquete);\r\n        vue.paquetes.forEach(element => {\r\n          // console.log(element.estado);\r\n          // console.log(element.id);\r\n          if(element.id == item.idPaquete){\r\n            element.estado= state;\r\n          // console.log(element.estado);\r\n          }\r\n        })\r\n      },\r\n      enviarPaquetes(){\r\n        let vue = this;\r\n        // console.log(vue.paquetes);\r\n        axios.post(vue.$store.state.appUri+'/paquetes/actualizarLista', vue.paquetes)\r\n        .then(response => {\r\n          vue.notifyVue('top', 'center',2, NotificationTemplateUpdatePackageSuccess);\r\n          vue.$forceUpdate();\r\n        })\r\n        .catch(e => {\r\n          vue.errors.push(e)\r\n          vue.notifyVue('top', 'center',4, NotificationTemplateUpdatePackageError); \r\n        });\r\n        vue.paquetes = [];\r\n      },\r\n      anadirPaquete(){\r\n        this.$router.push('RegisterPackage');\r\n      }\r\n    },\r\n    props: {\r\n      id: {\r\n        type: String,\r\n        default: () => {\r\n          return \"\";\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n</style>\r\n"]}]}